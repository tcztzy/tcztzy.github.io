
<!DOCTYPE html>
<html lang="zh-cn">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Tcztzy Blog">
    <title>Tcztzy Blog</title>
    <meta name="author" content="唐梓涯">
    
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <meta property="og:type" content="blog">
<meta property="og:title" content="Tcztzy Blog">
<meta property="og:url" content="https://tcztzy.github.io/index.html">
<meta property="og:site_name" content="Tcztzy Blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Tcztzy Blog">
    
    
        
    
    
        <meta property="og:image" content="http://oexlj9n6m.bkt.clouddn.com/image/avatar.jpg/avatar"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-gxrkitjjfqp3e7vq7igezqpodxwvfywjetcxxc5vnnb46t4tlpxn0owp0xfx.min.css">
    <!--STYLES END-->
    
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-85403649-1']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


<header id="header" data-behavior="2">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">Tcztzy Blog</a>
    </div>
    
        
            <a  class="header-right-icon "
                href="#about">
        
        
            <i class="fa fa-lg fa-user-secret"></i>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="2">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="http://oexlj9n6m.bkt.clouddn.com/image/avatar.jpg/avatar" alt="作者的图片"/>
                </a>
                <h4 class="sidebar-profile-name">唐梓涯</h4>
                
                    <h5 class="sidebar-profile-bio"><p>Pythoner, Emacser, GNU/Linuxer<br>目前在微软技术支持掏粪</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                        <span class="sidebar-button-desc">首页</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                        <span class="sidebar-button-desc">分类</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                        <span class="sidebar-button-desc">标签</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-archives"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                        <span class="sidebar-button-desc">归档</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/tcztzy" target="_blank">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="http://stackoverflow.com/users/5434822/ziya-tang" target="_blank">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-stack-overflow"></i>
                        <span class="sidebar-button-desc">Stack Overflow</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="mailto:tcztzy@gmail.com" target="_blank">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-envelope-o"></i>
                        <span class="sidebar-button-desc">邮箱</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/links"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-external-link"></i>
                        <span class="sidebar-button-desc">友情链接</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/atom.xml"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="2"
                 class="
                        hasCoverMetaIn
                        ">
                <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/2016/11/09/python-import-system/">
                            Python导入系统
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2016-11-09T19:33:43+08:00">
	
		    11月 09, 2016
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/programming/">编程</a>


    
</div>

            </div>
            
                <div class="postShorten-content" itemprop="articleBody">
                    <p>本人翻译，转载请注明出处</p>
<h1 id="5-导入系统"><a href="#5-导入系统" class="headerlink" title="5. 导入系统"></a>5. 导入系统</h1><p>一个<a href="https://docs.python.org/3/glossary.html#term-module" target="_blank" rel="external">模块</a>中的Python代码通过<a href="https://docs.python.org/3/glossary.html#term-importing" target="_blank" rel="external">导入</a>的过程可以访问另一个模块的代码。<a href="https://docs.python.org/3/reference/simple_stmts.html#import" target="_blank" rel="external"><code>import</code></a>语句是调用导入机制的最常见的方式，但不是唯一的方式。例如<a href="https://docs.python.org/3/library/importlib.html#importlib.import_module" title="importlib.import_module" target="_blank" rel="external"><code>importlib.import_module()</code></a>和内建函数<a href="https://docs.python.org/3/library/functions.html#__import__" title="__import__" target="_blank" rel="external"><code>__import__()</code></a>也可以用来调用导入机制。</p>
<p><a href="https://docs.python.org/3/reference/simple_stmts.html#import" target="_blank" rel="external"><code>import</code></a>语句结合了两个操作；搜索指定模块，然后在本地作用域把搜索的结果和名字绑定。<a href="https://docs.python.org/3/reference/simple_stmts.html#import" target="_blank" rel="external"><code>import</code></a>语句的搜索的操作被定义为一次<a href="https://docs.python.org/3/library/functions.html#__import__" title="__import__" target="_blank" rel="external"><code>__import__()</code></a>函数的调用，传入一些合适的参数。<a href="https://docs.python.org/3/library/functions.html#__import__" title="__import__" target="_blank" rel="external"><code>__import__()</code></a>的返回值被用来执行<a href="https://docs.python.org/3/reference/simple_stmts.html#import" target="_blank" rel="external"><code>import</code></a>语句的命名绑定的操作。命名绑定的确切的细节参见<a href="https://docs.python.org/3/reference/simple_stmts.html#import" target="_blank" rel="external"><code>import</code></a>语句。</p>
<p><a href="https://docs.python.org/3/library/functions.html#__import__" title="__import__" target="_blank" rel="external"><code>__import__()</code></a>的直接调用仅执行模块的搜索，如果有结果，还有模块的创建操作。当（ 执行<code>__import__()</code>函数时）某些副作用可能会发生，例如导入父模块，还有更新很多缓存（包括<a href="https://docs.python.org/3/library/sys.html#sys.modules" title="sys.modules" target="_blank" rel="external"><code>sys.modules</code></a>），只有<a href="https://docs.python.org/3/reference/simple_stmts.html#import" target="_blank" rel="external"><code>import</code></a>语句执行命名绑定操作。</p>
<p>当<a href="https://docs.python.org/3/library/functions.html#__import__" title="__import__" target="_blank" rel="external"><code>__import__()</code></a>作为导入语句被调用的时候，是标准内建函数<a href="https://docs.python.org/3/library/functions.html#__import__" title="__import__" target="_blank" rel="external"><code>__import__()</code></a>被调用。其他调用导入系统的机制（例如<a href="https://docs.python.org/3/library/importlib.html#importlib.import_module" title="importlib.import_module" target="_blank" rel="external"><code>importlib.import_module()</code></a>）可能选择推翻<a href="https://docs.python.org/3/library/functions.html#__import__" title="__import__" target="_blank" rel="external"><code>__import__()</code></a>而使用自己的导入语义学实现。</p>
<p>当一个模块第一次被导入的时候，Python搜索这个模块，如果发现，它就会创建一个模块对象<span id="id1"><a href="#fnmo">[1]</a></span>，初始化之。如果指定模块无法被找到，将会触发一个<a href="https://docs.python.org/3/library/exceptions.html#ImportError" title="ImportError" target="_blank" rel="external"><code>ImportError</code></a>。Python实现了多种策略当导入机器被调用时搜索指定模块。这些策略可以被多种下文描述的钩子修改和拓展。</p>
<p><em>在版本3.3中的改变：</em> 导入系统更新完全实现了<a href="https://www.python.org/dev/peps/pep-0302" target="_blank" rel="external">PEP 302</a>的第二阶段。不再有任何隐式的导入机制了 - 整个导入系统通过<a href="https://docs.python.org/3/library/sys.html#sys.meta_path" title="sys.meta_path" target="_blank" rel="external"><code>sys.meta_path</code></a>暴露。此外，本地的命名空间包支持被实现了（参见<a href="https://www.python.org/dev/peps/pep-0420" target="_blank" rel="external">PEP 420</a>）。</p>
<h2 id="5-1-importlib"><a href="#5-1-importlib" class="headerlink" title="5.1. importlib"></a>5.1. <a href="https://docs.python.org/3/library/importlib.html#module-importlib" title="importlib: The implementation of the import machinery." target="_blank" rel="external"><code>importlib</code></a></h2><p><a href="https://docs.python.org/3/library/importlib.html#module-importlib" title="importlib: The implementation of the import machinery." target="_blank" rel="external"><code>importlib</code></a>模块提供丰富的API和导入系统交互。例如<a href="https://docs.python.org/3/library/importlib.html#importlib.import_module" title="importlib.import_module" target="_blank" rel="external"><code>importlib.import_module()</code></a>提供一个推荐的，比内建函数<a href="https://docs.python.org/3/library/functions.html#__import__" title="__import__" target="_blank" rel="external"><code>__import__()</code></a>更简单的API调用导入机制。参考<a href="https://docs.python.org/3/library/importlib.html#module-importlib" title="importlib: The implementation of the import machinery." target="_blank" rel="external"><code>importlib</code></a>的库文档获得更多的细节。</p>
<h2 id="5-2-包"><a href="#5-2-包" class="headerlink" title="5.2. 包"></a>5.2. 包</h2><p>Python只有一种模块对象的类型，所有的模块都是这种类型，无论这个模块是由Python，C还是其他语言实现的。为帮助组织模块提供命名继承，Python有<a href="https://docs.python.org/3/glossary.html#term-package" target="_blank" rel="external">包</a>的概念。</p>
<p>你可以把包想成是一个文件系统的目录而模块是目录下的文件，不过不要对这个比喻太咬文嚼字因为包和模块并不需要来自文件系统。就本文档的目的，我们将使用这种目录和文件的方便的比喻。类似文件系统的目录，包依层级组织，并且包它们本身也可能包含子包，或者是常规模块。</p>
<p>重要的是记住所有的包都是模块，但不是所有的模块都是包。或者换种说法，包只是一种特别的模块。特别的，任何含有<code>__path__</code>属性的模块都被认为是包。</p>
<p>所有模块都有一个名字。子包名字和他们的父包的名字用一个点分隔，类似于Python的标准属性的访问语法。因此你或许有一个名为<a href="https://docs.python.org/3/library/sys.html#module-sys" title="sys: Access system-specific parameters and functions." target="_blank" rel="external"><code>sys</code></a>的模块和一个名为<a href="https://docs.python.org/3/library/email.html#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages, including MIME documents." target="_blank" rel="external"><code>email</code></a>的包，其中包含一个名为<a href="https://docs.python.org/3/library/email.mime.html#module-email.mime" title="email.mime: Build MIME messages." target="_blank" rel="external"><code>email.mime</code></a>的子包和这个子包中的一个名为<code>email.mime.text</code>的模块。</p>
<h3 id="5-2-1-常规包"><a href="#5-2-1-常规包" class="headerlink" title="5.2.1. 常规包"></a>5.2.1. 常规包</h3><p>Python定义了两种类型的包，<a href="https://docs.python.org/3/glossary.html#term-regular-package" target="_blank" rel="external">常规包</a>和<a href="https://docs.python.org/3/glossary.html#term-namespace-package" target="_blank" rel="external">命名空间包</a>。常规包是传统的包，他们存在于Python 3.2及更早的版本中。一个常规包通常实现为一个包含一个<code>__init__.py</code>文件的目录。 当导入常规包时，这个<code>__init__.py</code>文件被隐式执行，它定义的对象被绑定到包命名空间中的名称。 <code>__init__.py</code>文件可以包含与任何其他模块可以包含的Python代码相同的Python代码，Python会在导入时为模块添加一些其他属性。</p>
<p>例如，以下文件系统布局定义具有三个子包的顶级父包：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">parent/</div><div class="line">    __init__.py</div><div class="line">    one/</div><div class="line">        __init__.py</div><div class="line">    two/</div><div class="line">        __init__.py</div><div class="line">    three/</div><div class="line">        __init__.py</div></pre></td></tr></table></figure></p>
<p>导入<code>parent.one</code>将隐式执行<code>parent/__init__.py</code>和<code>parent/one/__init__.py</code>。 后续导入的<code>parent.two</code>或<code>parent.three</code>将分别执行<code>parent/two/__init__.py</code>和<code>parent/three/__init__.py</code>。</p>
<h3 id="5-2-2-命名空间包"><a href="#5-2-2-命名空间包" class="headerlink" title="5.2.2. 命名空间包"></a>5.2.2. 命名空间包</h3><p>命名空间包由各种<a href="https://docs.python.org/3/glossary.html#term-portion" target="_blank" rel="external">组分</a>组成，其中每个组分向父包提供子包。组分可以驻留在文件系统上的不同位置。组分也可以在zip文件，网络或Python在导入期间搜索的任何其他位置找到。命名空间包可以或可以不直接对应于文件系统上的对象；它们可以是没有具体代表的虚拟模块。</p>
<p>命名空间包的<code>__path__</code>属性不使用普通的列表。它们改为使用自定义可迭代类型，如果其父包（或顶级包的<a href="https://docs.python.org/3/library/sys.html#sys.path" title="sys.path" target="_blank" rel="external"><code>sys.path</code></a>）的路径发生更改，则会在该包中的下一次导入尝试时自动执行对包组分的新搜索。</p>
<p>使用命名空间包，没有<code>parent/__init__.py</code>文件。实际上，在导入搜索期间可能会找到多个<code>parent</code>目录，其中每个目录由不同的组分提供。因此，<code>parent/one</code>可能不在物理上位于<code>parent/two</code>旁边。在这种情况下，每当导入顶层父包或其中一个子包时，Python将为顶级父包创建命名空间包。</p>
<p>有关命名空间包规范，请参见<a href="https://www.python.org/dev/peps/pep-0420" target="_blank" rel="external">PEP 420</a>。</p>
<h2 id="5-3-搜索"><a href="#5-3-搜索" class="headerlink" title="5.3. 搜索"></a>5.3. 搜索</h2><p>要开始搜索，Python需要待导入模块（或包，但为了讨论的目的，差别是无关紧要的）的完全<a href="https://docs.python.org/3/glossary.html#term-qualified-name" target="_blank" rel="external">限定名</a>。此名称可能来自<a href="https://docs.python.org/3/reference/simple_stmts.html#import" target="_blank" rel="external"><code>import</code></a>语句的各种参数，或来自<a href="https://docs.python.org/3/library/importlib.html#importlib.import_module" title="importlib.import_module" target="_blank" rel="external"><code>importlib.import_module()</code></a>或<a href="https://docs.python.org/3/library/functions.html#__import__" title="__import__" target="_blank" rel="external"><code>__import__()</code></a>函数的参数。</p>
<p>此名称将用于导入搜索的各个阶段，它可以是子模块的点分隔路径，例如<code>foo.bar.baz</code>。 在这种情况下，Python首先尝试导入<code>foo</code>，然后是<code>foo.bar</code>，最后是<code>foo.bar.baz</code>。 如果任何中间导入失败，则会引发<a href="https://docs.python.org/3/library/exceptions.html#ImportError" title="ImportError" target="_blank" rel="external"><code>ImportError</code></a>。</p>
<h3 id="5-3-1-模块缓存"><a href="#5-3-1-模块缓存" class="headerlink" title="5.3.1. 模块缓存"></a>5.3.1. 模块缓存</h3><p>在导入搜索期间检查的第一个位置是<a href="https://docs.python.org/3/library/sys.html#sys.modules" title="sys.modules" target="_blank" rel="external"><code>sys.modules</code></a>。此映射充当先前导入的所有模块的缓存，包括中间路径。 因此，如果以前导入<code>foo.bar.baz</code>，<a href="https://docs.python.org/3/library/sys.html#sys.modules" title="sys.modules" target="_blank" rel="external"><code>sys.modules</code></a>将包含<code>foo</code>，<code>foo.bar</code>和<code>foo.bar.baz</code>的条目。 每个键将具有作为其值的相应模块对象。</p>
<p>在导入期间，模块名称在<a href="https://docs.python.org/3/library/sys.html#sys.modules" title="sys.modules" target="_blank" rel="external"><code>sys.modules</code></a>中被查找，如果存在，则关联的值是满足导入的模块，并且导入过程完成。 但是，如果值为<code>None</code>，则会引发<a href="https://docs.python.org/3/library/exceptions.html#ImportError" title="ImportError" target="_blank" rel="external"><code>ImportError</code></a>。 如果模块名称丢失，Python将继续搜索模块。</p>
<p><a href="https://docs.python.org/3/library/sys.html#sys.modules" title="sys.modules" target="_blank" rel="external"><code>sys.modules</code></a>是可写的。 删除键可能不会破坏关联的模块（因为其他模块可能保存对它的引用），但它将使指定模块的缓存条目无效，导致Python在下次导入时重新搜索指定的模块。 该键也可以分配为<code>None</code>，强制下一次导入模块导致<a href="https://docs.python.org/3/library/exceptions.html#ImportError" title="ImportError" target="_blank" rel="external"><code>ImportError</code></a>。</p>
<p>注意，如果你保留对模块对象的引用，使其在<a href="https://docs.python.org/3/library/sys.html#sys.modules" title="sys.modules" target="_blank" rel="external"><code>sys.modules</code></a>中的缓存条目无效，然后重新导入指定模块，两个模块对象将不会相同。 相比之下，<a href="https://docs.python.org/3/library/importlib.html#importlib.reload" target="_blank" rel="external"><code>importlib.reload()</code></a>将重用相同的模块对象，并且通过重新运行模块的代码来重新初始化模块内容。</p>
<h3 id="5-3-2-查找器和加载器"><a href="#5-3-2-查找器和加载器" class="headerlink" title="5.3.2. 查找器和加载器"></a>5.3.2. 查找器和加载器</h3><p>如果在<a href="https://docs.python.org/3/library/sys.html#sys.modules" title="sys.modules" target="_blank" rel="external"><code>sys.modules</code></a>中找不到指定模块，那么将调用Python的导入协议来查找和加载模块。该协议由两个概念对象<a href="https://docs.python.org/3/glossary.html#term-finder" target="_blank" rel="external">查找器</a>和<a href="https://docs.python.org/3/glossary.html#term-loader" target="_blank" rel="external">加载器</a>组成。查找器的工作是确定是否可以用它已知的无论什么策略找到指定模块。实现这两个接口的对象被称为<a href="https://docs.python.org/3/glossary.html#term-importer" target="_blank" rel="external">导入器</a> - 当他们发现他们可以加载请求的模块时，它们返回自己。</p>
<p>Python包括许多默认查找器和导入器。 第一个知道如何定位内置模块，第二个知道如何定位冻结模块。 第三个默认查找器在<a href="https://docs.python.org/3/glossary.html#term-import-path" target="_blank" rel="external">导入路径</a>中搜索模块。 <a href="https://docs.python.org/3/glossary.html#term-import-path" target="_blank" rel="external">导入路径</a>是可以命名文件系统路径或zip文件的位置列表。 它还可以扩展为搜索任何可定位资源，例如由URL标识的资源。</p>
<p>导入机制是可扩展的，因此可以添加新的查找器以扩展模块搜索的范围和范围。</p>
<p>查找器实际上不加载模块。 如果他们可以找到指定模块，他们返回一个模块规范，模块的导入相关信息的封装，导入机制然后在加载模块时使用。</p>
<p>以下部分更详细地介绍查找器和装载程序的协议，包括如何创建和注册新协议以扩展导入机制。</p>
<p><em>在版本3.4中更改：</em> 在以前的Python版本中，查找器直接返回<a href="https://docs.python.org/3/glossary.html#term-loader" target="_blank" rel="external">加载器</a>，而现在它们返回包含装载器的模块规格。 装载机仍在导入期间使用，但责任较少。</p>
<h3 id="5-3-3-导入钩子"><a href="#5-3-3-导入钩子" class="headerlink" title="5.3.3. 导入钩子"></a>5.3.3. 导入钩子</h3><p>导入机制被设计为可拓展的；这个的主要机制是导入钩子。有两种类型的导入钩子：元钩子和导入路径钩子。</p>
<p>元钩子在导入进行前被调用，在任何其他导入过程开始之前，除了<a href="https://docs.python.org/3/library/sys.html#sys.modules" title="sys.modules" target="_blank" rel="external"><code>sys.modules</code></a>缓存查找。这运行元钩子覆盖<a href="https://docs.python.org/3/library/sys.html#sys.path" title="sys.path" target="_blank" rel="external"><code>sys.path</code></a>处理，冻结模块，甚至内置模块。通过向<a href="https://docs.python.org/3/library/sys.html#sys.meta_path" title="sys.meta_path" target="_blank" rel="external"><code>sys.meta_path</code></a>添加新的查找器对象来注册元钩子，如下所述。</p>
<p>导入路径钩子作为<a href="https://docs.python.org/3/library/sys.html#sys.path" title="sys.path" target="_blank" rel="external"><code>sys.path</code></a>（或<code>package.__ path__</code>）处理的一部分，在遇到它们相关的路径项的点被调用。 通过向<a href="https://docs.python.org/3/library/sys.html#sys.path_hooks" title="sys.path_hooks" target="_blank" rel="external"><code>sys.path_hooks</code></a>添加新的可调用项来注册导入路径挂接，如下所述。</p>
<h3 id="5-3-4-元路径"><a href="#5-3-4-元路径" class="headerlink" title="5.3.4. 元路径"></a>5.3.4. 元路径</h3><p>当在<a href="https://docs.python.org/3/library/sys.html#sys.modules" title="sys.modules" target="_blank" rel="external"><code>sys.modules</code></a>中无法找到指定模块，Python next searches <a href="https://docs.python.org/3/library/sys.html#sys.meta_path" title="sys.meta_path" target="_blank" rel="external"><code>sys.meta_path</code></a>, which contains a list of meta path finder objects. These finders are queried in order to see if they know how to handle the named module. Meta path finders must implement a method called <a href="https://docs.python.org/3/library/importlib.html#importlib.abc.MetaPathFinder.find_spec" target="_blank" rel="external"><code>find_spec()</code></a> which takes three arguments: a name, an import path, and (optionally) a target module. The meta path finder can use any strategy it wants to determine whether it can handle the named module or not.</p>
<p>If the meta path finder knows how to handle the named module, it returns a spec object. If it cannot handle the named module, it returns <code>None</code>. If <a href="https://docs.python.org/3/library/sys.html#sys.meta_path" title="sys.meta_path" target="_blank" rel="external"><code>sys.meta_path</code></a> processing reaches the end of its list without returning a spec, then an <a href="https://docs.python.org/3/library/exceptions.html#ImportError" title="ImportError" target="_blank" rel="external"><code>ImportError</code></a> is raised. Any other exceptions raised are simply propagated up, aborting the import process.</p>
<p>The <a href="https://docs.python.org/3/library/importlib.html#importlib.abc.MetaPathFinder.find_spec" target="_blank" rel="external"><code>find_spec()</code></a> method of meta path finders is called with two or three arguments. The first is the fully qualified name of the module being imported, for example <code>foo.bar.baz</code>. The second argument is the path entries to use for the module search. For top-level modules, the second argument is None, but for submodules or subpackages, the second argument is the value of the parent package’s <code>__path__</code> attribute. If the appropriate <code>__path__</code> attribute cannot be accessed, an <a href="https://docs.python.org/3/library/exceptions.html#ImportError" title="ImportError" target="_blank" rel="external"><code>ImportError</code></a> is raised. The third argument is an existing module object that will be the target of loading later. The import system passes in a target module only during reload.</p>
<p>The meta path may be traversed multiple times for a single import request. For example, assuming none of the modules involved has already been cached, importing <code>foo.bar.baz</code> will first perform a top level import, calling <code>mpf.find_spec(&quot;foo&quot;, None, None)</code> on each meta path finder (<code>mpf</code>). After <code>foo</code> has been imported, <code>foo.bar</code> will be imported by traversing the meta path a second time, calling <code>mpf.find_spec(&quot;foo.bar&quot;, foo.__path__, None)</code>. Once <code>foo.bar</code> has been imported, the final traversal will call <code>mpf.find_spec(&quot;foo.bar.baz&quot;, foo.bar.__path__, None)</code>.</p>
<p>Some meta path finders only support top level imports. These importers will always return <code>None</code> when anything other than <code>None</code> is passed as the second argument.</p>
<p>Python’s default <a href="https://docs.python.org/3/library/sys.html#sys.meta_path" title="sys.meta_path" target="_blank" rel="external"><code>sys.meta_path</code></a> has three meta path finders, one that knows how to import built-in modules, one that knows how to import frozen modules, and one that knows how to import modules from an <a href="https://docs.python.org/3/glossary.html#term-import-path" target="_blank" rel="external">import path</a> (i.e. the <a href="https://docs.python.org/3/glossary.html#term-path-based-finder" target="_blank" rel="external">path based finder</a>).</p>
<p><em>Changed in version 3.4:</em> The <a href="https://docs.python.org/3/library/importlib.html#importlib.abc.MetaPathFinder.find_spec" target="_blank" rel="external"><code>find_spec()</code></a> method of meta path finders replaced <a href="https://docs.python.org/3/library/importlib.html#importlib.abc.MetaPathFinder.find_module" target="_blank" rel="external"><code>find_module()</code></a>, which is now deprecated. While it will continue to work without change, the import machinery will try it only if the finder does not implement <code>find_spec()</code>.</p>
<h3 id="脚注"><a href="#脚注" class="headerlink" title="脚注"></a>脚注</h3><p><span id="fnmo"><a href="#id1">[1]</a> 参见<a href="https://docs.python.org/3/library/types.html#types.ModuleType" title="types.ModuleType" target="_blank" rel="external"><code>types.ModuleType</code></a></span></p>

                    
                        
                    
                    
                        <p>
                            <a href="/2016/11/09/python-import-system/#post-footer" class="postShorten-excerpt_link link">
                                注释和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/2016/11/03/redis-password-contains-slashes/">
                            当Redis的密码包含`/`
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2016-11-03T16:49:23+08:00">
	
		    11月 03, 2016
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/programming/">编程</a>


    
</div>

            </div>
            
                <div class="postShorten-content" itemprop="articleBody">
                    <p>今天在把Azure Redis Cache集成到Django项目的时候发现一个奇怪的报错，<img src="http://oexlj9n6m.bkt.clouddn.com/Capture.PNG" alt="ValueError at /login/ invalid literal for int() with base 10: &#39;iAITMl7lD127c&#39;"></p>
<p>检查一下我的settings.py是这么写的：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">CACHES = &#123;</div><div class="line">    <span class="string">"default"</span>: &#123;</div><div class="line">        <span class="string">"BACKEND"</span>: <span class="string">"django_redis.cache.RedisCache"</span>,</div><div class="line">        <span class="string">"LOCATION"</span>: <span class="string">"rediss://:iAITMl7lD127c/VZEl0OZl8qviaXHIoKekaJjP1J1HI=@#马赛克#:6380/0"</span>,</div><div class="line">        <span class="string">"OPTIONS"</span>: &#123;</div><div class="line">            <span class="string">"CLIENT_CLASS"</span>: <span class="string">"django_redis.client.DefaultClient"</span>,</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>然后发现报错信息中的<code>iAITMl7lD127c</code>正好就是<code>/</code>前面的内容，料想应该是解析URL的时候错把这个<code>/</code>当做分隔符了。一路TraceBack发现正是Python的标准库urlparse中抛出的错误，然后义正言辞地去找redis-py，结果发现人家<a href="https://github.com/andymccurdy/redis-py/pull/586" target="_blank" rel="external">已经修复了</a>，但是django-redis应该不会对此进行修改，因为作者是知道这个BUG的但是也没改，而是给了之前的OPTIONS的解决方案。我目前的解决方案是，刷一个不带<code>/</code>的密码或者这样用：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">CACHES = &#123;</div><div class="line">    <span class="string">"default"</span>: &#123;</div><div class="line">        <span class="string">"BACKEND"</span>: <span class="string">"django_redis.cache.RedisCache"</span>,</div><div class="line">        <span class="string">"LOCATION"</span>: <span class="string">"rediss://#马赛克#:6380/0"</span>,</div><div class="line">        <span class="string">"OPTIONS"</span>: &#123;</div><div class="line">            <span class="string">"CLIENT_CLASS"</span>: <span class="string">"django_redis.client.DefaultClient"</span>,</div><div class="line">            <span class="string">"PASSWORD"</span>: <span class="string">"iAITMl7lD127c/VZEl0OZl8qviaXHIoKekaJjP1J1HI="</span>,</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>参考阅读：</p>
<p><a href="https://github.com/niwinz/django-redis/issues/114" target="_blank" rel="external">https://github.com/niwinz/django-redis/issues/114</a><br><a href="https://github.com/andymccurdy/redis-py/issues/579" target="_blank" rel="external">https://github.com/andymccurdy/redis-py/issues/579</a></p>

                    
                        
                    
                    
                        <p>
                            <a href="/2016/11/03/redis-password-contains-slashes/#post-footer" class="postShorten-excerpt_link link">
                                注释和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/2016/10/28/number-to-chinese/">
                            数字转中文
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2016-10-28T07:09:30+08:00">
	
		    10月 28, 2016
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/programming/">编程</a>


    
</div>

            </div>
            
                <div class="postShorten-content" itemprop="articleBody">
                    <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># coding: utf-8</span></div><div class="line"><span class="string">"""\</span></div><div class="line">规则:</div><div class="line">1. 中文分为数字（零、一、二、三、四、伍、六、七、八、九），数位[个、十、百、千、万、亿]和符号[负，点]三部分</div><div class="line">2. 数位个略去</div><div class="line">3. 以一十开头略去首位一</div><div class="line">4. 数位为零，保留数字零略去该数位单位</div><div class="line">5. 连续数位为零，保留一个零</div><div class="line">6. 个，万，亿位为零，略去零</div><div class="line">7.</div><div class="line">"""</div><div class="line"></div><div class="line">numbers = [<span class="string">"零"</span>, <span class="string">"一"</span>, <span class="string">"二"</span>, <span class="string">"三"</span>, <span class="string">"四"</span>, <span class="string">"五"</span>, <span class="string">"六"</span>, <span class="string">"七"</span>, <span class="string">"八"</span>, <span class="string">"九"</span>]</div><div class="line">units = [<span class="string">"亿"</span>, <span class="string">"万"</span>, <span class="string">"千"</span>, <span class="string">"百"</span>, <span class="string">"十"</span>, <span class="string">""</span>]</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">i2c</span><span class="params">(i, recursive=False)</span>:</span></div><div class="line">    <span class="keyword">if</span> i &lt; <span class="number">0</span>:</div><div class="line">        <span class="keyword">return</span> <span class="string">'负'</span>+i2c(abs(i))</div><div class="line">    <span class="keyword">if</span> i == <span class="number">0</span>:</div><div class="line">        <span class="keyword">return</span> <span class="string">"零"</span></div><div class="line">    <span class="keyword">elif</span> i &lt; pow(<span class="number">10</span>, <span class="number">4</span>):</div><div class="line">        result = <span class="string">""</span></div><div class="line">        <span class="keyword">for</span> d, u <span class="keyword">in</span> zip(str(i).zfill(<span class="number">4</span>), units[<span class="number">2</span>:]):</div><div class="line">            result += numbers[int(d)]+u <span class="keyword">if</span> d != <span class="string">"0"</span> <span class="keyword">else</span> <span class="string">"零"</span></div><div class="line">    <span class="keyword">elif</span> i &lt; pow(<span class="number">10</span>, <span class="number">8</span>):</div><div class="line">        wj, rest = divmod(i, pow(<span class="number">10</span>, <span class="number">4</span>))</div><div class="line">        result = i2c(wj)+<span class="string">"万"</span>+(<span class="string">"零"</span> <span class="keyword">if</span> rest &lt; pow(<span class="number">10</span>, <span class="number">3</span>) <span class="keyword">else</span> <span class="string">""</span>)+i2c(rest, <span class="keyword">True</span>)</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        yi, rest = divmod(i, pow(<span class="number">10</span>, <span class="number">8</span>))</div><div class="line">        result = i2c(yi)+<span class="string">"亿"</span>+(<span class="string">"零"</span> <span class="keyword">if</span> rest &lt; pow(<span class="number">10</span>, <span class="number">7</span>) <span class="keyword">else</span> <span class="string">""</span>)+i2c(rest, <span class="keyword">True</span>)</div><div class="line">    result = <span class="string">"零"</span>.join(result.replace(<span class="string">"零"</span>, <span class="string">" "</span>).split())</div><div class="line">    <span class="keyword">return</span> result[<span class="number">1</span>:] <span class="keyword">if</span> result.startswith(<span class="string">'一十'</span>) <span class="keyword">and</span> <span class="keyword">not</span> recursive <span class="keyword">else</span> result</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">f2c</span><span class="params">(f)</span>:</span></div><div class="line">    <span class="keyword">if</span> f == <span class="string">''</span>:</div><div class="line">        f = <span class="string">'0'</span></div><div class="line">    <span class="keyword">return</span> <span class="string">'点'</span>+<span class="string">''</span>.join(map(<span class="keyword">lambda</span> d: numbers[int(d)], f))</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">n2c</span><span class="params">(n)</span>:</span></div><div class="line">    nsplit = n.split(<span class="string">'.'</span>)</div><div class="line">    i = int(nsplit[<span class="number">0</span>]) <span class="keyword">if</span> nsplit[<span class="number">0</span>] <span class="keyword">else</span> <span class="number">0</span></div><div class="line">    <span class="keyword">if</span> len(nsplit) == <span class="number">1</span>:</div><div class="line">        <span class="keyword">return</span> i2c(i)</div><div class="line">    <span class="keyword">elif</span> len(nsplit) == <span class="number">2</span> <span class="keyword">and</span> n != <span class="string">'.'</span>:</div><div class="line">        <span class="keyword">return</span> i2c(i)+f2c(nsplit[<span class="number">1</span>])</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        <span class="keyword">raise</span> ValueError</div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    <span class="keyword">import</span> sys</div><div class="line">    print(n2c(sys.argv[<span class="number">1</span>]))</div></pre></td></tr></table></figure>

                    
                        
                    
                    
                        <p>
                            <a href="/2016/10/28/number-to-chinese/#post-footer" class="postShorten-excerpt_link link">
                                注释和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/2016/10/20/menlo-font-on-windows/">
                            Hexo主题Tranquilpeak代码等宽字体问题研究
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2016-10-20T03:43:12+08:00">
	
		    10月 20, 2016
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/programming/">编程</a>


    
</div>

            </div>
            
                <div class="postShorten-content" itemprop="articleBody">
                    <p><a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>是一个比较火的博客框架（主观），然后我使用了其中的<a href="https://github.com/LouisBarranqueiro/hexo-theme-tranquilpeak" target="_blank" rel="external">Tranquilpeak</a>主题，但是发现写着写着发现，本来应该等宽的代码部分明显不是等宽的，然后就<a href="https://github.com/LouisBarranqueiro/hexo-theme-tranquilpeak/blob/master/docs/user.md#change-global-style" target="_blank" rel="external">翻文档</a></p>
<blockquote>
<h3 id="Change-global-style"><a href="#Change-global-style" class="headerlink" title="Change global style"></a>Change global style</h3><p>If you want to change font families, font size, sidebar color, things like that, take a look at <code>source/_css/utils/_variables.scss</code> file. This file contains global variables used in this theme. <strong>Build the theme after changes to see changes.</strong></p>
</blockquote>
<p>OK，接着<a href="https://github.com/LouisBarranqueiro/hexo-theme-tranquilpeak/blob/41cf0e78bdd2d65f0dd8213a6a7d12e732e6044f/source/_css/utils/_variables.scss#L16" target="_blank" rel="external">翻源码</a></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">// Global settings</div><div class="line">// --------------------------------------------</div><div class="line"></div><div class="line">// Font families</div><div class="line">$open-sans:            'Open Sans';</div><div class="line">$open-sans-sans-serif: 'Open Sans', sans-serif;</div><div class="line">$merriweather-serif:   'Merriweather', serif;</div><div class="line">$menlo:                 Menlo;</div><div class="line"></div><div class="line">$font-family-base: $open-sans-sans-serif;</div><div class="line"></div><div class="line">$font-families: (</div><div class="line">   // base</div><div class="line">   'headings':          $open-sans-sans-serif,</div><div class="line">   // components</div><div class="line">   'code':              $menlo,</div><div class="line">   'caption':           $merriweather-serif,</div><div class="line">   'image-gallery':     $open-sans,</div><div class="line">   'post-header-cover': $merriweather-serif,</div><div class="line">   'post-meta':         $open-sans-sans-serif,</div><div class="line">   'post-content':      $merriweather-serif,</div><div class="line">   'post-excerpt-link': $open-sans-sans-serif,</div><div class="line">   'highlight':         $menlo,</div><div class="line">   // layout</div><div class="line">   'sidebar':           $open-sans-sans-serif</div><div class="line">);</div></pre></td></tr></table></figure>
<p><a href="http://lmgtfy.com/?q=Menlo+font" target="_blank" rel="external">Menlo这个字体</a>是mono space的呀，怎么显示不对呢，然后我注意到<a href="https://zh.wikipedia.org/wiki/Menlo" target="_blank" rel="external">这么一段话</a>:</p>
<blockquote>
<p>Menlo是一个无衬线等宽字体，由Jim Lyles设计，首次出现于2009年8月上市的<strong>Mac OS X Snow Leopard系统内建字体之一</strong>。基于开源字体Bitstream Vera与自由版权字体DejaVu字体改良而来</p>
</blockquote>
<p>什么？Mac OS X内建字体？那也就是说本穷用的Windows 10 Home应该是不会有咯。然后本穷就<a href="https://github.com/hbin/top-programming-fonts/raw/master/Menlo-Regular.ttf" target="_blank" rel="external">下载</a>，安装，重启浏览器，OK，终于显示正确了。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul>
<li><p>Web开发不得不考虑跨平台的问题，所以一定不能在字体这个地方栽跟头，不能说你用的Mac开发的你就用Menlo不管了，好歹加个备选的monospace。</p>
</li>
<li><p>issue给作者之后发现，问题已经被fix，但是还得等下个版本release才能见到。这又教导我，在issue之前最好好好搜一下已有的issue和pull request，已经有的问题不要重复开issue。</p>
</li>
</ul>

                    
                        
                    
                    
                        <p>
                            <a href="/2016/10/20/menlo-font-on-windows/#post-footer" class="postShorten-excerpt_link link">
                                注释和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/2016/10/16/pep-7/">
                            PEP 7
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2016-10-16T19:41:12+08:00">
	
		    10月 16, 2016
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/programming/">编程</a>


    
</div>

            </div>
            
                <div class="postShorten-content" itemprop="articleBody">
                    <h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>本文提供Python的C实现的C代码的编码风格。Python代码的风格指南参见相关信息的PEP<a class="footnote-reference" href="#id2" id="id1">[1]</a>。</p>
<p>注意，规则有时也会被打破。两个打破特定规则的好的理由：</p>
<ol>
<li>当遵循这个规则回事代码更少地可读，即使其他人依据此规则去阅读代码。</li>
<li>未保持和周围也打破规则的代码一致（也许是历史原因）–尽管有一个机会去清理别人的烂摊子（以真正的XP格式）</li>
</ol>
<h1 id="C方言"><a href="#C方言" class="headerlink" title="C方言"></a>C方言</h1><ul>
<li>Python 3.6之前使用的是ANSI/ISO标准C（1989版标准）。这意味着（以及其他许多情况）所有的申明都必须在代码块顶部（不需要再函数的顶部）。</li>
<li>Python 3.6及之后的版本使用采用了部分C99特性的C89：<ul>
<li>标准整形在<code>&lt;stdint.h&gt;</code>和<code>&lt;inttypes.h&gt;</code>中。我们要求定宽的整形类型。</li>
<li><code>static inline</code>函数</li>
<li>指定初始化器（designated initializers），对类型定义特别好。</li>
<li>混合申明</li>
<li>布尔值</li>
<li>C++风格的行注释<br>未来C99的特性可能会被添加到这个列表视编译器支持而定（主要是MSVC）。</li>
</ul>
</li>
<li>不要使用GCC拓展（例如，不要写没有行尾的反斜杠的多行字符串）</li>
<li>所有的函数申明和定义必须使用完全原型（例如，指定所有参数的类型）</li>
<li>永远不要使用C++风格的<code>//</code>一行注释</li>
<li>在几种主要编译器（gcc，VC++，一些其他的）上没有警告</li>
</ul>
<h1 id="代码布局"><a href="#代码布局" class="headerlink" title="代码布局"></a>代码布局</h1><ul>
<li>使用4个空格缩进并完全禁用tab。</li>
<li>每行不得超过79个字符。如果这一条和前一条一起没有给你的代码足够的空间，那么你的代码就太复杂了–考虑使用子程序。</li>
<li>函数定义格式：函数名在第1列，最外面的花括号在第一列，在本地变量申明之后留空行。</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span></span></div><div class="line"><span class="title">extra_ivars</span><span class="params">(PyTypeObject *type, PyTypeObject *base)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> t_size = PyType_BASICSIZE(type);</div><div class="line">    <span class="keyword">int</span> b_size = PyType_BASICSIZE(base);</div><div class="line"></div><div class="line">    assert(t_size &gt;= b_size); <span class="comment">/* type smaller than base! */</span></div><div class="line">    ...</div><div class="line">    <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>代码结构：在诸如<code>if</code>，<code>for</code>等关键词和接下来的左括号直接一个空格；在括号内没有空格；大括号被强烈推荐使用但可在C允许的情况下省略，并且它们应格式化成下面所示：</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (mro != <span class="literal">NULL</span>) &#123;</div><div class="line">    ...</div><div class="line">&#125;</div><div class="line"><span class="keyword">else</span> &#123;</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><p>return语句不应有多余的括号：<br><code>return Py_None; /* correct */</code><br><code>return(Py_None); /* incorrect */</code></p>
</li>
<li><p>函数和宏的调用风格：<code>foo(a, b, c)</code>–在左括号之前没有空格，在括号中没有空格，在逗号前没有空格，在每个逗号后一个空格。</p>
</li>
<li><p>总是在赋值符号，布尔值和比较符两边加上括号，在表达式中使用了很多操作符，在最外面的（最低优先级）的两边加上空格。</p>
</li>
<li><p>长行换行：如果可以，在最外层表达式的逗号后折行。总是保持缩进</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">PyErr_Format(PyExc_TypeError,</div><div class="line">             <span class="string">"cannot create '%.100s' instances"</span>,</div><div class="line">             type-&gt;tp_name);</div></pre></td></tr></table></figure>
</li>
<li><p>当你在长表达式的二元操作符处换行，这个操作符跟在前一行的行末，例如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (type-&gt;tp_dictoffset != <span class="number">0</span> &amp;&amp; base-&gt;tp_dictoffset == <span class="number">0</span> &amp;&amp;</div><div class="line">    type-&gt;tp_dictoffset == b_size &amp;&amp;</div><div class="line">    (<span class="keyword">size_t</span>)t_size == b_size + <span class="keyword">sizeof</span>(PyObject *))</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">/* "Forgive" adding a __dict__ only */</span></div></pre></td></tr></table></figure>
</li>
<li><p>在函数、结构定义、函数的主要片段的前后留空行。</p>
</li>
<li><p>注释放在它们描述的函数之前。</p>
</li>
<li><p>所有的函数和全局变量申明为static，除非他们是发布的接口的一部分</p>
</li>
<li><p>对于外部函数和变量，我们总是在“Include”文件夹中合适的头文件中声明，使用PyAPI_FUNC()宏，如：</p>
<p><code>PyAPI_FUNC(PyObject *) PyObject_Repr(PyObject *);</code></p>
</li>
</ul>
<h1 id="命名习惯"><a href="#命名习惯" class="headerlink" title="命名习惯"></a>命名习惯</h1><ul>
<li><p>公共函数使用<code>Py</code>前缀；永远不要给静态函数（使用<code>Py</code>前缀）。<code>Py_</code>前缀给全局服务例程如<code>Py_FatalError</code>；特定的服务组（例如特定对象类型API）使用长前缀例如字符串使用PyString_。</p>
</li>
<li><p>公共函数和变量使用混合大小写以及下划线，例如这些：<code>PyObject_GetAttr</code>，<code>Py_BuildValue</code>，<code>PyExc_TypeError</code>。</p>
</li>
<li><p>偶尔的一个“内部”函数需要对加载器可见，对此我们使用<code>_Py</code>前缀，例如：<code>_PyObject_Dump</code>。</p>
</li>
<li><p>宏应该是混合大小写的前缀跟着大写，例如：<code>PyString_AS_STRING</code>，<code>Py_PRINT_RAW</code>。</p>
</li>
</ul>
<h1 id="文档字符串"><a href="#文档字符串" class="headerlink" title="文档字符串"></a>文档字符串</h1><ul>
<li><p>对文档字符串使用<code>PyDoc_STR()</code>或者<code>PyDoc_STRVAR()</code>宏以获得无文档字符串地编译Python（<code>./configure --without-doc-strings</code>）。</p>
<p>对于需要支持早于2.3版本Python的C代码，你可以在引入<code>Python.h</code>后包含如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> PyDoc_STR</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> PyDoc_VAR(name)         static char name[]</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> PyDoc_STR(str)          (str)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> PyDoc_STRVAR(name, str) PyDoc_VAR(name) = PyDoc_STR(str)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div></pre></td></tr></table></figure>
</li>
<li><p>函数文档字符串的第一行应是一个“签名行”–给出一个参数和返回值简短的概要，例如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">PyDoc_STRVAR(myfunction__doc__,</div><div class="line"><span class="string">"myfunction(name, value) -&gt; bool\n\n\</span></div><div class="line">Determine whether name and value make a valid pair.");</div></pre></td></tr></table></figure>
<p>总是包含一个空行在签名行和描述的文本之间。</p>
<p>如果函数的返回值总是为<code>None</code>（因为没有有意义的返回值），不要写返回类型的提示。</p>
</li>
<li><p>当写多行文档字符串时，确保总是像上面例子中使用反斜杠继续，或者字符串字面相连：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">PyDoc_STRVAR(myfunction__doc__,</div><div class="line"><span class="string">"myfunction(name, value) -&gt; bool\n\n"</span></div><div class="line"><span class="string">"Determine whether name and value make a valid pair."</span>);</div></pre></td></tr></table></figure>
<p>尽管一些C编译器接受没有上述两种规范的字符串：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">/* BAD -- don't do this! */</div><div class="line">PyDoc_STRVAR(myfunction__doc__,</div><div class="line">"myfunction(name, value) -&gt; bool\n\n</div><div class="line">Determine whether name and value make a valid pair.");</div></pre></td></tr></table></figure>
<p>不要这么做；已知MSVC编译器会抱怨这个。</p>
</li>
</ul>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><table>
<thead>
<tr>
<th><span style="display: none"></span></th>
<th><span style="display: none"></span></th>
</tr>
</thead>
<tbody>
<tr>
<td><a class="fn-backref" href="#id1" id="id2">[1]</a></td>
<td><a href="http://www.python.org/dev/peps/pep-0008" target="_blank" rel="external">PEP 8</a> , “Style Guide for Python Code”, van Rossum, Warsaw ( <a href="http://www.python.org/dev/peps/pep-0008" target="_blank" rel="external">http://www.python.org/dev/peps/pep-0008</a> )</td>
</tr>
</tbody>
</table>
<h1 id="版权信息"><a href="#版权信息" class="headerlink" title="版权信息"></a>版权信息</h1><p>此文档已放在公共领域。</p>
<p>源：<a href="https://github.com/python/peps/blob/master/pep-0007.txt" target="_blank" rel="external">https://github.com/python/peps/blob/master/pep-0007.txt</a></p>

                    
                        
                    
                    
                        <p>
                            <a href="/2016/10/16/pep-7/#post-footer" class="postShorten-excerpt_link link">
                                注释和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/2016/10/13/python-source-code-note-0/">
                            Python源码学习笔记-0
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2016-10-13T00:15:35+08:00">
	
		    10月 13, 2016
    	
    </time>
    
        <span>发布在 </span>
        
    <a class="category-link" href="/categories/programming/">编程</a>


    
</div>

            </div>
            
                <div class="postShorten-content" itemprop="articleBody">
                    <p><a href="http://magiccards.info/6e/en/150.html" target="_blank" rel="external"><img src="http://magiccards.info/crop/en/6e/150.jpg" alt="Python" title="artwork by Steve White"></a></p>
<h1 id="0-前言"><a href="#0-前言" class="headerlink" title="0. 前言"></a>0. 前言</h1><p>年初的时候给自己挖了一个坑，计划要在今年过一遍Python的源码。结果这一年零零碎碎总有事情耽搁了。现在已经10月份了，再不填坑就来不及了。于是有了这个系列。</p>
<p>说到看Python源码，陈儒的<a href="https://book.douban.com/subject/3117898/" target="_blank" rel="external">Python源码剖析</a>可谓经典了。本系列基本也是根据此书的结构的。不过此书出版已近十年（2016-10），Python版本也从2.5到了3.5。不才能力有限，姑妄言之。</p>
<p>运行环境：Bash on Ubuntu on Windows，同样适用其他于UNIX-like环境。</p>
<h1 id="1-获取Python源码"><a href="#1-获取Python源码" class="headerlink" title="1. 获取Python源码"></a>1. 获取Python源码</h1><p>  你可以选择<a href="https://www.python.org/ftp/python/2.7.12/Python-2.7.12.tar.xz" target="_blank" rel="external">2.7.12</a>或 <a href="https://www.python.org/ftp/python/3.5.2/Python-3.5.2.tar.xz" target="_blank" rel="external">3.5.2</a>。当然你也可以使用<code>hg clone https://hg.python.org/cpython</code>和<code>hg update 3.5</code>这样的命令来选择你喜欢的版本分支。（hg通过sudo apt install mercurial安装）</p>
<p>  值得注意的是，CPython会检测到是否是从工作拷贝（由hg clone的）运行。这意味着如果你在你的拷贝中编辑CPython源码，Python代码（.py文件）的改变会被解释器立即使用和测试。（如果你修改的是C代码，你将需要重新编译受影响的文件）。</p>
<h1 id="2-编译为调试模式"><a href="#2-编译为调试模式" class="headerlink" title="2. 编译为调试模式"></a>2. 编译为调试模式</h1><p>  CPython提供几种编译flag帮助调试很多东西。所有已知的flag都可以在<code>Misc/SpecialBuilds.txt</code>文件中找到，最常用的是<code>Py_DEBUG</code>标志。<br>  <div class="alert info no-icon"><p>暂时还不清楚SpecialBuilds中的编译选项的具体用法，搞明白之后再更新。</p>
</div></p>
<p>  构建debug版的Python，可以在源码根目录中运行<code>./configure --with-debug</code><br>  <div class="alert info no-icon"><p>Python源码剖析中有提到<code>--enable-shared</code>，如果你不知道是干什么的建议不要加上，不然会链接到系统自带的Python的。</p>
</div></p>
<h2 id="2-1-构建依赖"><a href="#2-1-构建依赖" class="headerlink" title="2.1. 构建依赖"></a>2.1. 构建依赖</h2><p>  CPython的核心解释器需要C编译器构建。一些拓展模块也依赖额外的库。<br>  Debian/Ubuntu系的可执行如下命令安装依赖：<br>  <code>sudo apt-get install -y make build-essential libssl-dev zlib1g-dev libbz2-dev \
libreadline-dev libsqlite3-dev wget curl llvm libncurses5-dev libncursesw5-dev xz-utils</code></p>
<p>  Mac OS X:<br>  <code>brew install readline xz</code><br>  其他发行版本参见参考资料[2]。</p>
<h1 id="3-目录结构"><a href="#3-目录结构" class="headerlink" title="3. 目录结构"></a>3. 目录结构</h1><p>大部分的子文件夹都有自己的README。大部分的文件都有注释。</p>
<table>
<thead>
<tr>
<th>文件或文件夹</th>
<th>简介</th>
</tr>
</thead>
<tbody>
<tr>
<td>Demo/</td>
<td>示例脚本，模块和程序</td>
</tr>
<tr>
<td>Doc/</td>
<td>文档源(reStructuredText)</td>
</tr>
<tr>
<td>Grammar/</td>
<td>Python的<abbr title="Extended Backus-Naur Form">EBNF</abbr>语法文件</td>
</tr>
<tr>
<td>Include/</td>
<td>公共头文件</td>
</tr>
<tr>
<td>LICENSE</td>
<td>授权信息</td>
</tr>
<tr>
<td>Lib/</td>
<td>Python部分标准库，均是Python写的</td>
</tr>
<tr>
<td>Mac/</td>
<td>Macintosh特定的资源（例如，用IDLE作为OS X的应用）</td>
</tr>
<tr>
<td>Makefile.pre.in</td>
<td>Source from which config.status creates the Makefile.pre</td>
</tr>
<tr>
<td>Misc/</td>
<td>其他有用的文件</td>
</tr>
<tr>
<td>Modules/</td>
<td>大部分内置模块的实现</td>
</tr>
<tr>
<td>Objects/</td>
<td>大部分内置对象类型的实现</td>
</tr>
<tr>
<td>PC/</td>
<td>PC特定的文件(DOS, Windows, OS/2)</td>
</tr>
<tr>
<td>PCbuild/</td>
<td>Microsoft Visual C++的build目录</td>
</tr>
<tr>
<td>Parser/</td>
<td>解析器和分词器以及他们的输入处理AST的节点也在这个文件夹</td>
</tr>
<tr>
<td>Python/</td>
<td>字节编译器和解释器，Python核心部分。</td>
</tr>
<tr>
<td>README</td>
<td>读我</td>
</tr>
<tr>
<td>RISCOS/</td>
<td>RISC操作系统特定的文件</td>
</tr>
<tr>
<td>Tools/</td>
<td>一些用Python写的有用的程序</td>
</tr>
<tr>
<td>pyconfig.h.in</td>
<td>Source from which pyconfig.h is created (GNU autoheader output)</td>
</tr>
<tr>
<td>configure</td>
<td>配置的shell脚本(GNU autoconf的输出)</td>
</tr>
<tr>
<td>configure.ac</td>
<td>配置格式(GNU autoconf的输入)</td>
</tr>
<tr>
<td>install-sh</td>
<td>用来安装文件的Shell脚本</td>
</tr>
</tbody>
</table>
<h1 id="4-贴士"><a href="#4-贴士" class="headerlink" title="4. 贴士"></a>4. 贴士</h1><p>  4.1. <code>Py_ssize_t</code><br>    首先理解什么是size_t，然后是ssize_t，然后你就知道什么是Py_ssize_t了。<br>  4.2. <code>int_repr</code><br>    在最新的Python代码中没有了int_repr这个函数，甚至没有了intobject。善用搜索引擎，发现了旧版本的intobject.c中有两处int_repr，一处是定义，一处是引用。<code>(reprfunc)int_repr, /* tp_repr */</code>拿注释<code>tp_repr</code>在新版里搜，发现了<code>long_to_decimal_string, /* tp_repr */</code>不出意外这就是改动后的函数，试试再按Python源码剖析的例子操作，成功输出。</p>
<div class="alert warning no-icon"><p>未完待续</p>
</div>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料:"></a>参考资料:</h1><blockquote>
<p>[1] <a href="https://docs.python.org/devguide/" target="_blank" rel="external">Python Developer’s Guide — Python Developer’s Guide </a><br>[2] <a href="https://github.com/yyuu/pyenv/wiki/Common-build-problems" target="_blank" rel="external">Common build problems · yyuu/pyenv Wiki</a></p>
</blockquote>

                    
                        
                    
                    
                        <p>
                            <a href="/2016/10/13/python-source-code-note-0/#post-footer" class="postShorten-excerpt_link link">
                                注释和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/2016/10/01/hello-world/">
                            Hello World
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2016-10-01T06:02:35+08:00">
	
		    10月 01, 2016
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content" itemprop="articleBody">
                    <p>欢迎来到我的博客！<br>头像是我的男神薛定谔。</p>

                    
                        
                    
                    
                        <p>
                            <a href="/2016/10/01/hello-world/#post-footer" class="postShorten-excerpt_link link">
                                注释和共享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
        <li class="pagination-number">第 1 页 共 1 页</li>
    </ul>
</div>

</section>


                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2016 唐梓涯. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="http://oexlj9n6m.bkt.clouddn.com/image/avatar.jpg/avatar" alt="作者的图片"/>
        
            <h4 id="about-card-name">唐梓涯</h4>
        
            <div id="about-card-bio"><p>Pythoner, Emacser, GNU/Linuxer<br>目前在微软技术支持掏粪</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>全栈工程师</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                中国无锡
            </div>
        
    </div>
</div>

        <div id="algolia-search-modal" class="modal-container">
    <div class="modal">
        <div class="modal-header">
            <span class="close-button"><i class="fa fa-close"></i></span>
            <a href="https://algolia.com" target="_blank" class="searchby-algolia text-color-light link-unstyled">
                <span class="searchby-algolia-text text-color-light text-small">by</span>
                <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
            </a>
            <i class="search-icon fa fa-search"></i>
            <form id="algolia-search-form">
                <input type="text" id="algolia-search-input" name="search"
                    class="form-control input--large search-input" placeholder="Search "
                    autofocus="autofocus"/>
            </form>
        </div>
        <div class="modal-body">
            <div class="no-result text-color-light text-center">没有找到文章</div>
            <div class="results">
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://tcztzy.github.io/2016/10/01/hello-world/">
                            <h3 class="media-heading">Hello World</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016年10月1日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://tcztzy.github.io/2016/10/13/python-source-code-note-0/">
                            <h3 class="media-heading">Python源码学习笔记-0</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016年10月13日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://tcztzy.github.io/2016/10/16/pep-7/">
                            <h3 class="media-heading">PEP 7</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016年10月16日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://tcztzy.github.io/2016/10/20/menlo-font-on-windows/">
                            <h3 class="media-heading">Hexo主题Tranquilpeak代码等宽字体问题研究</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016年10月20日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://tcztzy.github.io/2016/10/28/number-to-chinese/">
                            <h3 class="media-heading">数字转中文</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016年10月28日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://tcztzy.github.io/2016/11/03/redis-password-contains-slashes/">
                            <h3 class="media-heading">当Redis的密码包含`/`</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016年11月3日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://tcztzy.github.io/2016/11/09/python-import-system/">
                            <h3 class="media-heading">Python导入系统</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2016年11月9日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
            </div>
        </div>
        <div class="modal-footer">
            <p class="results-count text-medium"
                data-message-zero="没有找到文章"
                data-message-one="找到 1 篇文章"
                data-message-other="找到 {n} 篇文章">
                找到 7 篇文章
            </p>
        </div>
    </div>
</div>
        
<div id="cover" style="background-image:url('http://oexlj9n6m.bkt.clouddn.com/image/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-aefdxebvplc4ftfj4r0flyrd6szwoqme4warbwhkeovj1fw0fyshidtnund1.min.js"></script>
<!--SCRIPTS END-->



    </body>
</html>
